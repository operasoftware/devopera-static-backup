<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Opera エクステンション：ウィンドウ - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Add-ons - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Add-ons - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Opera 11-12 extensions - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons/extensions">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Opera 11-12 extensions - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons/extensions">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="extensions">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
      <nav id="subnav">
        <ul role="menu">
            <li role="menuitem"  class="selected">
              <a href="../../../addons/extensions/index.html">Opera 11-12 extensions</a>
            </li>
            <li role="menuitem" >
              <a href="../../../extension-docs/index.html">Opera 15+ extensions</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons/themes.html">Themes</a>
            </li>
        </ul>
      </nav>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="ja">
      <h1>Opera エクステンション：ウィンドウ</h1>
      <p class="print author">By t.ashula</p>

      <h2>
はじめに</h2>
<p>
  Opera エクステンションは HTML や JavaScript、CSS といった Web 標準の技術を使ってデスクトップ版 Opera に対する機能追加を可能にします。
  この文書では、エクステンションの API を使ったデスクトップ版 Opera のウィンドウの操作方法を解説していきます。
  ウィンドウの操作には <code>Windows</code> オブジェクトを使います。</p>
<p class="note">
  Opera エクステンションの基礎的なことが知りたいなら続きを読む前に <a href="../opera-extensions-hello-world-ja/index.html">Opera エクステンションで Hello World!</a> の記事を読むと良いでしょう。</p>
<h3>
目次</h3>
<ol>
<li>
<a href="index.html#create">ウィンドウを作る</a></li>
<li>
<a href="index.html#windows">ウィンドウのイベント</a></li>
<li>
<a href="index.html#listener">ウィンドウのイベントリスナ</a></li>
<li>
<a href="index.html#conclusion">まとめ</a></li>
<li>
<a href="index.html#api">API リファレンス</a></li>
<h2 id="create">ウィンドウを作る</h2>
<p>
  いつも通りイベントリスナを使ってイベントを待ち受けて関数を実行させます。今回はウィンドウの読込み終了イベントを使います。
  それから、<code>opera.extension.windows.create</code> の存在を確認してから呼び出します。</p>
<pre><code>
window.addEventListener( &quot;load&quot;, function(){
  if( opera.extension.windows.create ) {
    opera.extension.windows.create();
  } 
  else {
    // Couldn&#39;t find an opera.extension.windows.create object.
  }
}, false);</code></pre>
<h2 id="windows">
ウィンドウのイベント</h2>
<p>
  windows オブジェクトにインタラクションがあるとイベントが発生します。
  たとえば、フォーカスが移ってくると <code>onfocus</code> イベントが発生します。
  Opera エクステンションには以下の4つのイベントが定義されてます。</p>
<ul>
<li>
<code>
  onfocus</code></li>
<li>
<code>
  onclose</code></li>
<li>
<code>
  oncreate</code></li>
<li>
<code>
  onblur</code></li></ul>
<p>
  イベントの発生時に、<code>opera.postError</code> 関数を使って適切なメッセージを出してみます。
  <code>opera.postError</code> 関数の出力はエラーコンソール（メニューバー &gt; ツール &gt; 詳細 &gt; エラーコンソール）で見ることが出来ます。</p>
<pre><code>
window.addEventListener( &quot;load&quot;, function(){
  if( opera.extension.windows ) {
    opera.extension.windows.onfocus = function( event ){
      opera.postError( &quot;windows is focused&quot; );
    }
    opera.extension.windows.onclose = function( event ){
      opera.postError( &quot;windows is closed&quot; );
    }
    opera.extension.windows.oncreate = function( event ){
      opera.postError( &quot;windows is create&quot; );
    }
    opera.extension.windows.onblur = function( event ){
      opera.postError( &quot;windows loses focus&quot; );
    }    
  }
  else {
    // couldn&#39;t find an opera.extension.windows object.
  }
}, false); </code></pre>

<h2 id="listener">ウィンドウのイベントリスナ</h2>
<p>
  次はイベントリスナについての話をしましょう。
  JavaScript のイベントリスナと同じように、Opera エクステンションのイベントリスナにも扱うイベント、そのハンドラ関数、そして真偽値の3つの引数を与えます。
  Opera エクステンションのイベントリスナでは以下の4つのイベントが扱えます。</p>
<ul>
<li>
<code>focus</code></li>
<li>
<code>close</code></li>
<li>
<code>create</code></li>
<li>
<code>update</code></li>
<li>
<code>blur</code></li></ul>
<p>
  次のコード片では、<code>addEventListener</code> 関数を使って <code>focus</code> イベントにハンドラ関数を登録しています。
  3番目の引数はイベントハンドラ関数が実行されるフェーズを指定するものですが、差し当たって真偽値で <code> false </code> 固定にしておくべきです。
<pre><code>opera.extension.windows.addEventListener( &quot;focus&quot;, function(){/* do something */}, false);</code></pre>
<p>
  <code>addEventListener</code> 関数を使った時と <code>onevent</code> に代入した時とでは、どのように実行されるかに違いがあります。
  次のコードのようにした場合、上の行のハンドラ関数は置き換えられてしまうので、下の行のハンドラ関数しか実行されません。</p>
<pre><code>
opera.extension.windows.onfocus = function(){ /* do something */ };
opera.extension.windows.onfocus = function(){ /* do other thing */ };</code></pre>
<p>
  しかし、次のコードでは、どちらのハンドラ関数も登録されて実行されます。</p>
<pre><code>
opera.extension.windows.addEventListener( &quot;focus&quot;, function(){ /* do something */ }, false);
opera.extension.windows.addEventListener( &quot;focus&quot;, function(){ /* do other thing */ }, false);</code></pre>

<h2 id="conclusion">まとめ</h2>
<p>
  この文書では <code>windows</code> オブジェクトを使ったデスクトップ版 Opera のウィンドウの操作方法について述べました。
  より詳しい情報は、<a href="http://labs.opera.com/extensions-api/">Opera エクステンション API リファレンス</a>を参照してください。</p>
<h2 id="api">
API リファレンス</h2>
<p>
<code><a href="http://labs.opera.com/extensions-api/backgroundProcess/BrowserWindows.html">opera.extension.windows</a></code> オブジェクト</p>            </p></ol>

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license">Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=793162">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/zibin.html" rel="author">Zi Bin Cheah</a></p>
      <p class="author"><strong>Translator</strong> <a href="../../../author/t-ashula.html" rel="author">t.ashula</a></p>
      <p>
        <strong>Date</strong>
        Wednesday, November 3, 2010
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/API.html" rel="tag">API</a></li>
        <li><a href="../../tags/japanese.html" rel="tag">japanese</a></li>
        <li><a href="../../tags/opera&#32;extensions.html" rel="tag">opera extensions</a></li>
        <li><a href="../../tags/Windows.html" rel="tag">Windows</a></li>
      </ul>
      <p><strong>Languages</strong>
        <a href="../opera-extensions-windows/index.html">English</a>
      </p>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
